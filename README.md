# Fuel-Optimal Fleet Assignment in the Brazilian Domestic Air Transportation System

This repository provides an overview of the processed datasets and optimization code behind the fuel-optimal fleet assignment (FOFA) model. The model is implemented on the domestic Brazilian air transportation system.

## Fuel-Optimal Fleet Assignment (FOFA) Model

### Table of Contents

1. [ Processed Datasets ](#importing)
2. [ Optimization Code ](#building)
3. [ Results ](#results)

---
<a name="importing"></a>
### 1: Processed Datasets

**Description:** The optimization model takes 11 datasets as inputs. Detailed below, these were generated by processing [monthly data](https://www.gov.br/anac/pt-br/assuntos/regulados/empresas-aereas/Instrucoes-para-a-elaboracao-e-apresentacao-das-demonstracoes-contabeis/envio-de-informacoes) from the Brazilian National Civil Aviation Agency (ANAC), corresponding to all of 2024. Additional information about the ANAC datasets can be found [here](https://www.gov.br/anac/pt-br/assuntos/dados-e-estatisticas/mercado-do-transporte-aereo/demanda-e-oferta).

* **Aircraft Operational and Performance Statistics**:
  - ```Aircraft Statistics.xlsx```: This table contains ten operational performance characteristics for 19 different aircraft types that operated domestically in Brazil during 2024.
    
    - Operational performance characteristics include: (1) fleet-wide count; (2) fleet-wide yearly flying times (in days); (3) fleet-wide productivity (in ASKs/day); (4) fuel burn (in L/hr); (5) fuel burn (in L/km); (6) fuel burn (in L/RPK); (7) average number of seats; (8) average stage length (in km); (9) range (in km); and (10) take-off runway length (in m).
    
    - Aircraft types include: A320NEO; A321NEO; A319CEO; A320CEO; A321CEO; A330-200; A330-900; ATR42-500; ATR72-500; ATR72-600; B737-8; B737-800; B737-500; B737-700; B737-800; B787-9; C208; E195; and E195-E2.
  
* **Airport Characteristics**:
  - ```Airport Codes.xlsm```: This table contains the ICAO and IATA code, as well as latitude, longitude, and primary runway length (in m) of 169 airports in Brazil (indexed 1 through 169). For example, for Rio de Janeiro Galeao, Index: 34, ICAO Code: SBGL; IATA Code: GIG; Latitute: -22.81; Longitude: -43.25; and Primary Runway Length: 4000m.

* **Route Characteristics**:
  - ```baseline_fleet_assignment.xlsx```: This excel document contains nine 1413-by-19 matrices, representing the baseline assignment of aircraft type frequencies on each of the identified 1413 route segments in the domestic Brazilian air transportation system, aggregated for the entirety of 2024. Each of these matrices is associated with a different domestic Brazilian airline, and only considers route segments that saw at least one departures during 2024.
  
  - ```route_distances.csv```: This 1413-by-1 matrix contains the average distance (in km) for each of the identified 1413 route segments.
    
  - ```route_flight_times.csv```: This 1413-by-1 matrix contains the average flight time (in days) for each of the identified 1413 route segments. For example, for route #1, the average flight time was 0.028 days, or ~40 minutes.
 
  - ```route_airport_index.csv```: This 1413-by-2 matrix contains the mapping between each of the idenfied 1413 route segments, and their respective origin and destination airports (indexed 1 through 169). For example, route #1 operated between airport #1 (ARX) and airport #33 (FOR).
 
  - ```route_airport_index.xlsx```: This 1413-by-2 matrix contains the mapping between each of the idenfied 1413 route segments, and their respective origin and destination airports (indexed 1 through 169). For example, route #1 operated between airport #1 (ARX) and airport #33 (FOR).

* **Route Passengers**:
  -  ```airline_specific_yearly_route_passengers.csv```: This 1413-by-8 matrix contains the total (yearly) number of passengers that were transported on the identified 1413 route segments, for each of the eight domestic Brazilian airlines.
 
* **Fuel Consumption**:
  - ```airline_specific_yearly_fuel_consumed.csv```: This 1413-by-8 matrix contains the total (yearly) fuel consumed (in L) on each of the identified 1413 route segments, for each of the eight domestic Brazilian airlines.

* **Aircraft Utilization**:
  - ```airline_specific_yearly_aircraft_flying_times.csv```: This 19-by-8 matrix contains the total (yearly) fleet-wide flying times (in days) for each of the 19 different aircraft types and each of the eight domestic Brazilian airlines. For example, Azul's E195-E2 subfleet flew a cumulative amount of 3050.6 days (i.e., [3050.6 days * 24 hours] / [20 planes * 365 days] = ~6.7 hours/day).

* **Traffic Metrics**:
  - ```airline_specific_yearly_metrics.csv```: This 2-by-8 matrix contains the total (yearly) available seat-kms (ASKs) and total revenue passenger-kms (RPKs) produced by each of the eight domestic Brazilian airlines.

([ back to top ](#back_to_top))

---
<a name="building"></a>
### 2: Optimization Code

**Description:** The FOFA framework is implemented on the python scrypt ```FOFA_v3.py```. 
* The model can be run separately for the three largest airlines in Brazil by available seat-kms (ASKs) - Azul Linhas Aereas Brasileiras, Gol Linhas Aereas, LATAM Brasil - or on aggregate considering all eight Brazilian domestic airlines, in the form of a Combined Brazilian National Airline.
* To avoid making assumptions about what a representative day of operations looks like (e.g., in terms of the average daily number of passengers transported on each route, or average daily fleet utilization), the model is run on a yearly basis, aggregating values for the entirety of 2024. This modeling decision not only has the advantage of incorporating seasonality effects, but also enables building a feasible integer solution region.

**User Action:** To run the code, simply download ```FOFA_v3.py```, alongside the [Processed Datasets](https://github.com/andyeske/FOAA/tree/main/Processed%20Datasets) folder. The python scrypt requires the use of a [Gurobi](https://www.gurobi.com/academia/academic-program-and-licenses/?utm_source=google&utm_medium=cpc&utm_campaign=M3+A+Search+US+Brand&gad_source=1&gad_campaignid=22845995653&gbraid=0AAAAADimQ3jj4Ag29wWuPvh0gcP5gZAed&gclid=Cj0KCQjwgpzIBhCOARIsABZm7vGEZgRpIldNBFiA50gIS_sXEFHWZnGlusO4OP9ZU0IxiBviV5hoi9gaAhnOEALw_wcB) license, which can be obtained for free for students.

```FOFA_v3.py``` requires minimal user set-up - once open in a python environment, only the 'Step 0' section requires user-editing. Here, the user can appropriately change the dataset directories, select the airline, and modifiy the system-wide sensitivity parameters:

  ```
# ------------------------------------------------ #
# Step 0: User-editable Parameters
# ------------------------------------------------ #

# --> Data Directory 
directory = '/Users/andyeske/Desktop/Fall 2025/Optimization Methods/Project/Processed Datasets/'

# --> Airline
# Options: 
# (1): AD - Azul Linhas Aereas Brasileiras 
#      8 aircraft types, 30.2% market share by ASKs
#      Minimum LF = 82.2%

# (2): G3 - GOL Linhas Aereas
#      3 aircraft types, 30.5% market share by ASKs
#      Minimum LF = 84.7%

# (3): JJ - LATAM Brasil 
#      6 aircraft types, 38.7% market share by ASKs
#      Minimum LF = 83.6%

# (4): RG - Combined Brazilian National Airline (19 aircraft types)
#      19 aircraft types, including aicraft from:
#      -> 0S - Sideral Linhas Aereas
#      -> 2F - Azul Conecta
#      -> 2Z - Voepass
#      -> 7M - MAP Linhas Aereas
#      -> E4 - Abaete Aviacao
#      Minimum LF = 83.4%

Option = 3

# --> System-wide Sensitivity Parameters
# Establish a maximum load factor (max_LF)
max_LF = 85

# Enforce a maximum aircraft utilization percentage (max_uti)
max_uti = 101

# Fix the baseline fleet assignment on certain route segments (fixed_routes)
fixed_routes = []
  ```

Here, the system-wide sensitivity parameters include: the maximum load factor (i.e., establishing the maximum RPK/ASK ratio across the network); the maximum aircraft utilization percentage (i.e., dictating whether the fleet can be used more or less than the baseline), and the fixed routes (i.e., enforcing whether to directly fix the baseline fleet assignment on certain route segments). In the example above:
* ```max_LF = 85``` and  ```max_uti = 101``` constrain the optimized fleet assignment to a network with at most a 85% load factor and an aircraft utilization of 101% over the baseline.
* Meanwhile, ```fixed_routes = []``` indicates that no route is fixed. While FOFA can enforce specific fleet assignments on several route segments, this situation can also make the problem unfeasible.

Depending on the problem complexity, it could be useful to edit some of the Gurobi solver parameters detailed in 'Step 2'.

([ back to top ](#back_to_top))

---
<a name="results"></a>
### 3: Results
Running ```FOFA_v3.py``` with the parameters shown in the example above (i.e., on LATAM Brasil, using ```max_LF = 85```, ```max_uti = 101``` and ```fixed_routes = []```) produces the log shown below. This log includes information about: the user-defined input parameters; airline statistics (i.e., number of routes, passengers, aircraft types, RPKs, ASKs, LF); fuel consumption; average stage lengths; and optimization statistics (i.e., number of variables, constraints, runtime, and slacks).

  ```
---------------- Problem Statistics -----------------

---------------------- Inputs -----------------------
--> Airline: LATAM Brasil(JJ)
--> Maximum System-wide Load Factor (LF): 85%
--> Maximum Aircraft Utilization: 101%
--> Fixed Route: []

---------------------- Outputs ----------------------
--> Airline Statistics:
----> Number of Routes: 430
----> Number of Airports: 57
----> Number of Aircraft Types: 6
----> Number of Passengers: 35.3 million
----> Revenue Passenger Miles (RPKs): 39.58 billion
----> Revenue Passenger Miles (ASKs): 47.33 billion
----> Baseline Load Factor (LF): 83.6%

--> Fuel Consumption (FC):
----> Optimized FC (L): 1327 million L (Baseline FC (L): 1357 million L)
----> FC Reduction (%): -2.26%

--> Average Stage Lengths (ASL):
----> A320NEO Optimized ASL (km): 2426.0 km (Baseline ASL (km): 1079.0 km)
----> A321NEO Optimized ASL (km): 2251.0 km (Baseline ASL (km): 1400.0 km)
----> A319CEO Optimized ASL (km): 475.0 km (Baseline ASL (km): 753.0 km)
----> A320CEO Optimized ASL (km): 1309.0 km (Baseline ASL (km): 1012.0 km)
----> A321CEO Optimized ASL (km): 690.0 km (Baseline ASL (km): 1369.0 km)
----> B787-9 Optimized ASL (km): 328.0 km (Baseline ASL (km): 2347.0 km)
----> Airline Average Optimized ASL (km): 1070.0 km (Baseline ASL (km): 1071.0 km)

-------------------- Optimization --------------------
--> Overall Statistics:
----> Number of Variables: 2580
----> Number of Constraints: 1470
----> Runtime (s): 1.54s
----> Optimality Gap (%): 0.03%

--> Key Constraints Slack Percentage:
----> LF Slack (%): 0.83%
----> A320NEO Utilization Slack (%): 0.01%
----> A321NEO Utilization Slack (%): 0.01%
----> A319CEO Utilization Slack (%): 0.0%
----> A320CEO Utilization Slack (%): 0.1%
----> A321CEO Utilization Slack (%): 0.0%
----> B787-9 Utilization Slack (%): 0.1%

-----------------------------------------------------
  ```

A set of representative results obtained from implementing ```FOFA_v3.py``` on Azul Linhas Aereas Brasileiras (AD), Gol Linhas Aereas (G3), LATAM Brasil (JJ), and the Combined Brazilian National Airline (RG) can be found in ```Results.xlsx``` under the [Processed Datasets](https://github.com/andyeske/FOFA/tree/main/Processed%20Datasets) folder. For each airline considered, this excel document includes:

* **Optimized average stage lengths (in km) for each aircraft in the airline's fleet**:
  * These results show the effect of implementing FOFA on each aircraft's average stage length (ASL), for each airline's baseline LF.
  * Overall, the ASL of the fuel-efficient aircraft, such as the A320NEO, increases. These fuel-efficient aircraft are deployed on longer routes, where the overall fuel burn is greater.
  * Meanwhile, the ASL of the less fuel-efficient aircraft, such as the A320CEO, decreases.
  * The system-wide ASL remains practically the same. This makes sense, as the network itself did not change (i.e., the number of frequencies and the total distance flown did not change), acting as a sanity check to the model formulation.

<p align="left">
<img src="https://github.com/andyeske/FOFA/blob/main/Processed%20Datasets/ASL_Plot.jpg" width="1000"> 

**Figure:** _Optimized ASLs for each aircraft in the airline's fleet_.
</p>

* **Expected system-wide fuel consumption reductions (in %) with respect to the baseline, for various LF**:
  * These results display the sensitivity of the system-wide fuel consumption reduction to the ```max_LF``` parameter in ```FOFA_v3.py```.
  * Here, the baseline 2024 System-wide Fuel Consumptions (in L): 0.99 billion (AD); 0.94 billion (G3); 1.36 billion (JJ); and 3.32 billion (RG).
  * Overall, while AD, G3, and JJ see system-wide fuel consumption reductions ranging between ~1% - ~4% across all LFs (with the reduction increasing with the LF), RG consistently sees a reduction that is higher than any other airline.
  * This is due to the fact that, RG, possesing the most diverse fleet of aircraft (due to combining all airlines into one), is able to best match capacity to demand in the network.

<p align="left">
<img src="https://github.com/andyeske/FOFA/blob/main/Processed%20Datasets/LF_Plot.jpg" width="1000"> 

**Figure:** _System-wide fuel consumption reductions (in %) with respect to the baseline as a function of the LF_.
</p>
  
([ back to top ](#back_to_top))

## Authors

Andy Eskenazi<sup>1</sup>, Emilia Ospina Arango<sup>2</sup>, Mina Cezairli<sup>1</sup>, Catherine Ning<sup>3</sup> <br />
<sup>1</sup>Department of Aeronautics and Astronautics <br />
<sup>2</sup>System Design and Management <br />
<sup>3</sup>Operations Research Center <br />
Massachusetts Institute of Technology, 2025 <br />
